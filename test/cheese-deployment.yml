---
# This tests also weave-network and traefik-lb (implicitly)
# TODO: make explicit tests for weave-network and traefik-lb
- hosts: localhost
  connection: local
  gather_facts: False
  force_handlers: True
  vars:
    node_count: 6
    cf_zone: uservices.cloud
  pre_tasks:
    - name: "get test timestamp"
      set_fact:
        test_timestamp: "{{lookup('pipe','date +%Y%m%d%H%M%S')}}"
    - debug: msg="{{host_cloud}} build timestamp: {{test_timestamp}}"
  roles:
    - test-packer
    - test-terraform
    - test-bootstrap
    - test-cheese
